#!/usr/bin/env php
<?php

$autoloadPath = reset(array_filter(array(__DIR__ . '/../vendor/autoload.php', __DIR__ . '/../../../autoload.php'), function ($path) {
	return file_exists($path);
}));
if (false === $autoloadPath) {
	die('ERROR: Please install project dependencies with `composer install`.' . PHP_EOL);
}

require $autoloadPath;
$bootloader = new CM_Bootloader(dirname(dirname(realpath($autoloadPath))) . '/');
$bootloader->load();

$manager = new CM_Cli_CommandManager();
$manager->autoloadCommands();
$returnCode = $manager->run(new CM_Cli_Arguments($argv));
exit($returnCode);
